{
  "endpoint": "/api/rides/:id/payment",
  "method": "POST",
  "description": "Process payment for ride completion and split costs among passengers",
  "requiresAuth": true,
  "tags": ["rides", "payment", "cost-splitting"],
  "testCases": [
    {
      "name": "Happy path - process payment for completed ride",
      "pathParams": {
        "id": "{{cache:ride.id}}"
      },
      "payload": {
        "payment_method": "card",
        "card_token": "tok_visa_test"
      },
      "expectedStatus": 200,
      "expectedResponse": {
        "success": true,
        "message": "Payment processed successfully",
        "data": {
          "ride_id": "{{cache:ride.id}}",
          "total_amount": 15.50,
          "passenger_payments": [
            {
              "user_id": "{{cache:auth.user_id}}",
              "amount": 7.75,
              "status": "completed"
            }
          ],
          "transaction_id": "123e4567-e89b-12d3-a456-426614174000",
          "payment_status": "completed"
        }
      }
    }
  ]
}
